import{r as n,j as e,u as Q,H as W,c as M}from"./app-Coh28GkN.js";import{D as Z}from"./DataTable-B2jU8jFL.js";import{B as d,c as k,f as ee}from"./button-DWWnqr2n.js";import{C as ae,a as se,b as te,c as le,d as ne,e as R}from"./command-CIjx85Gj.js";import{P as re,a as ie,b as oe}from"./popover-CN9g6Vk6.js";import{B as ce}from"./badge-bjUTHq6f.js";import{S as z}from"./separator-CLuIOPgN.js";import{C as de}from"./chevrons-up-down-BAVBRCdf.js";import{C as J}from"./index-C77Ne_n3.js";import{X as ue}from"./x-DU0VxgT_.js";import{C as $}from"./card-BCRZtXkA.js";import{A as me,S as he,a as xe,b as pe,c as ge,d as je,e as fe,f as ve,g as be}from"./app-layout-DxwWa6ki.js";import{column as Ne}from"./column-DGX56g-K.js";import{D as q}from"./date-picker-Bo-4Pc-9.js";import{L as j}from"./label-B9WtLpDX.js";import{S as V,a as I,b as K,c as A,d as O}from"./select-DBMBIj5P.js";import{L as Ce}from"./loader-circle-jqZAKQAR.js";/* empty css            */import"./input-DQfjS0Jc.js";import"./table-CLnJY92L.js";import"./chevron-down-BICbNeg5.js";import"./search-DA7ChuBn.js";import"./index-HB87p0Ve.js";import"./index-CtC4mkRX.js";import"./index-BmfNfoHw.js";import"./index-CDQHmKfo.js";import"./index-D6m8-lop.js";import"./route-layout-CLvlloRf.js";import"./arrow-up-down-BVF5hZ63.js";import"./index-CBm6LL4B.js";function Se({options:o,onValueChange:u,defaultValue:w=[],placeholder:T="Select items",variant:F="default",animation:f=0,maxCount:D=3,modalPopover:v=!0,asChild:_=!1,className:b,required:N=!1,name:B,...E}){const[p,x]=n.useState(!1),[r,m]=n.useState(w),c=n.useRef(u);n.useEffect(()=>{c.current=u});const g=n.useCallback(s=>{m(l=>{const i=l.filter(t=>t!==s);return c.current(i),i})},[]),C=n.useCallback(()=>{m([]),c.current([])},[]),P=n.useCallback(()=>{const s=o.map(l=>l.value);m(s),c.current(s)},[o]),h=n.useCallback(s=>{const l=s.target;l.value===""&&(s.key==="Backspace"&&m(i=>{const t=[...i];return t.pop(),c.current(t),t}),s.key==="Escape"&&(l.blur(),x(!1)))},[]);o.filter(s=>!r.includes(s.value));const S=r.length===o.length&&o.length>0;return e.jsxs("div",{className:"space-y-2 relative",children:[e.jsx("input",{type:"text",name:B,value:r.length>0?r.join(","):"",required:N,style:{position:"absolute",top:0,left:0,width:"100%",height:"40px",opacity:0,pointerEvents:"none",zIndex:-1},tabIndex:-1,onChange:()=>{}}),e.jsxs(re,{open:p,onOpenChange:x,modal:v,children:[e.jsx(ie,{asChild:!0,children:e.jsxs(d,{variant:"outline",role:"combobox","aria-expanded":p,"aria-required":N,className:k("w-full justify-between text-left font-normal h-auto min-h-10 px-3 py-2",b),onClick:()=>x(!p),children:[e.jsx("div",{className:"flex gap-1 flex-wrap",children:r.length>0?e.jsxs("span",{className:"text-sm text-muted-foreground",children:[r.length," item",r.length>1?"s":""," selected"]}):e.jsx("span",{className:"text-muted-foreground",children:T})}),e.jsx(de,{className:"h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(oe,{className:"w-full p-0",align:"start",children:e.jsxs(ae,{children:[e.jsx(se,{placeholder:"Search options...",onKeyDown:h}),e.jsxs(te,{children:[e.jsx(le,{children:"No results found."}),e.jsxs(ne,{children:[e.jsxs(R,{onSelect:()=>{S?C():P()},className:"flex items-center space-x-2 cursor-pointer font-medium",children:[e.jsx("div",{className:k("flex h-4 w-4 items-center justify-center rounded-sm border border-primary",S?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(J,{className:"h-3 w-3 text-white"})}),e.jsx("span",{className:"flex-1",children:"Select All"})]}),e.jsx(z,{className:"my-1"}),o.map(s=>{const l=s.icon,i=r.includes(s.value);return e.jsxs(R,{onSelect:()=>{i?g(s.value):m(t=>{const y=[...t,s.value];return c.current(y),y})},className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("div",{className:k("flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(J,{className:"h-3 w-3 text-white"})}),l&&e.jsx(l,{className:"h-4 w-4"}),e.jsx("span",{className:"flex-1",children:s.label})]},s.value)})]})]}),e.jsx(z,{}),e.jsxs("div",{className:"flex items-center justify-between p-2",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:C,disabled:r.length===0,className:"h-8 px-2 text-sm ",children:"Clear"}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>x(!1),className:"h-8 px-2 text-sm ",children:"Close"})]})]})})]}),r.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:r.map(s=>{const l=o.find(t=>t.value===s),i=l?.icon;return e.jsxs(ce,{variant:"secondary",className:"text-xs",style:{animationDuration:`${f}s`},children:[i&&e.jsx(i,{className:"h-3 w-3 mr-1"}),l?.label,e.jsx("button",{className:"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:t=>{t.key==="Enter"&&g(s)},onMouseDown:t=>{t.preventDefault(),t.stopPropagation()},onClick:()=>g(s),children:e.jsx(ue,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},s)})})]})}function ye({className:o,...u}){return e.jsx("textarea",{"data-slot":"textarea",className:k("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),...u})}const ke=[{title:"Data Tagihan",href:"/admin/tagihan"}],sa=({tagihan:o,filters:u,biaya:w,kelas:T})=>{const[F,f]=n.useState(!1),[D,v]=n.useState(u?.bulan||""),[_,b]=n.useState(u?.tahun||""),[N,B]=n.useState(null),E=[{value:"1",label:"Januari"},{value:"2",label:"Februari"},{value:"3",label:"Maret"},{value:"4",label:"April"},{value:"5",label:"Mei"},{value:"6",label:"Juni"},{value:"7",label:"Juli"},{value:"8",label:"Agustus"},{value:"9",label:"September"},{value:"10",label:"Oktober"},{value:"11",label:"November"},{value:"12",label:"Desember"}],p=a=>{B(a),h("tanggal_tagihan",a?a.toISOString().split("T")[0]:"")},x=()=>{M.get(route("admin.tagihan.index"),{bulan:D,tahun:_},{preserveState:!0})},r=()=>{v(""),b(""),M.get(route("admin.tagihan.index"),{},{preserveState:!0})},m=Array.from({length:5},(a,X)=>{const L=new Date().getFullYear()-X;return{value:String(L),label:String(L)}}),[c,g]=n.useState(null),C=a=>{g(a),h("tanggal_jatuh_tempo",a?a.toISOString().split("T")[0]:"")},{data:P,setData:h,post:S,errors:s,processing:l}=Q({biaya_id:[],tanggal_tagihan:"",tanggal_jatuh_tempo:"",keterangan:"",kelas:""}),i=a=>{a.preventDefault(),S(route("admin.tagihan.store"),{onSuccess:()=>{f(!1)}})},t=w.map(a=>({value:String(a.id),label:`(${a.tahun_ajaran}) ${a.nama} - ${ee(a.jumlah)}`})),[y,H]=n.useState([]),[U,Y]=n.useState(""),G=a=>{H(a),h("biaya_id",a)};return e.jsxs(me,{breadcrumbs:ke,children:[e.jsx(W,{title:"Data Tagihan"}),e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Data Tagihan"}),e.jsx("h2",{className:"text-sm text-muted-foreground",children:"Kelola Data Tagihan"})]}),e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{children:"Bulan"}),e.jsxs(V,{value:D,onValueChange:v,children:[e.jsx(I,{className:"w-[180px]",children:e.jsx(K,{placeholder:"Pilih Bulan"})}),e.jsx(A,{children:E.map(a=>e.jsx(O,{value:a.value,children:a.label},a.value))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{children:"Tahun"}),e.jsxs(V,{value:_,onValueChange:b,children:[e.jsx(I,{className:"w-[180px]",children:e.jsx(K,{placeholder:"Pilih Tahun"})}),e.jsx(A,{children:m.map(a=>e.jsx(O,{value:a.value,children:a.label},a.value))})]})]}),e.jsx(d,{onClick:x,children:"Filter"}),e.jsx(d,{variant:"blue",onClick:r,children:"Reset"})]})}),e.jsxs(he,{open:F,onOpenChange:f,children:[e.jsx(xe,{asChild:!0,children:e.jsx(d,{className:"hover:cursor-pointer",variant:"default",children:"+ Tambah Data"})}),e.jsxs(pe,{className:"overflow-auto",children:[e.jsxs(ge,{children:[e.jsx(je,{children:"Tambah Data"}),e.jsx(fe,{children:"Masukkan data sesuai dengan form yang ada dibawah ini"})]}),e.jsxs("form",{onSubmit:i,className:"",children:[e.jsxs("div",{className:"grid flex-1 auto-rows-min gap-6 px-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(j,{children:"Pilih Kelas"}),e.jsxs(V,{value:U,onValueChange:a=>{Y(a),h("kelas",a)},children:[e.jsx(I,{className:"w-full",children:e.jsx(K,{placeholder:"Pilih Kelas"})}),e.jsx(A,{children:T.map(a=>e.jsx(O,{value:a.kelas,children:a.kelas},a.kelas))})]}),s.kelas&&e.jsx("p",{className:"text-red-500",children:s.kelas})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs(j,{htmlFor:"sheet-demo-biaya",children:["Biaya Yang Di Tagihkan",e.jsx("span",{className:"ml-1 text-destructive",children:"*"})]}),e.jsx(Se,{options:t,onValueChange:G,defaultValue:y,placeholder:"Pilih Biaya...",variant:"default",required:!0})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(q,{label:"Tanggal Tagihan",placeholder:"Pilih Tanggal",value:N,onChange:p,required:!0,name:"due_date"}),s.tanggal_tagihan&&e.jsx("p",{className:"text-red-500",children:s.tanggal_tagihan})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(q,{label:"Tanggal Jatuh Tempo",placeholder:"Pilih Tanggal",value:c,onChange:C,required:!0,name:"due_date"}),s.tanggal_tagihan&&e.jsx("p",{className:"text-red-500",children:s.tanggal_tagihan})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(j,{htmlFor:"sheet-demo-keterangan",children:"Keterangan"}),e.jsx(ye,{id:"sheet-demo-keterangan",placeholder:"Masukkan Keterangan",value:P.keterangan,onChange:a=>h("keterangan",a.target.value)}),s.keterangan&&e.jsx("p",{className:"text-red-500",children:s.keterangan})]})]}),e.jsxs(ve,{children:[e.jsxs(d,{type:"submit",disabled:l,children:[l&&e.jsx(Ce,{className:"mr-2 h-4 w-4 animate-spin"}),"Simpan"]}),e.jsx(be,{asChild:!0,children:e.jsx(d,{variant:"outline",children:"Close"})})]})]})]})]})]}),e.jsx($,{className:"p-4",children:e.jsx(Z,{data:o,columns:Ne})})]})};export{sa as default};
