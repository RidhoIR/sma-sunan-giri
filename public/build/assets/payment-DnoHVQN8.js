import{r as j,u as L,j as a,H as A}from"./app-Coh28GkN.js";import{A as V}from"./app-layout-DxwWa6ki.js";import{C as W}from"./card-BCRZtXkA.js";import{B as k}from"./button-DWWnqr2n.js";import{D as E}from"./date-picker-Bo-4Pc-9.js";import{L as i}from"./label-B9WtLpDX.js";import{I as m}from"./input-DQfjS0Jc.js";import{C as p}from"./combobox-CdlyWiJX.js";import{I as h}from"./info-CsbS3LzX.js";import{L as H}from"./loader-circle-jqZAKQAR.js";/* empty css            */import"./index-HB87p0Ve.js";import"./index-CtC4mkRX.js";import"./index-BmfNfoHw.js";import"./x-DU0VxgT_.js";import"./index-CDQHmKfo.js";import"./index-C77Ne_n3.js";import"./index-D6m8-lop.js";import"./chevrons-up-down-BAVBRCdf.js";import"./route-layout-CLvlloRf.js";import"./chevron-down-BICbNeg5.js";import"./popover-CN9g6Vk6.js";import"./command-CIjx85Gj.js";import"./search-DA7ChuBn.js";const J=[{title:"Pembayaran Wali Murid",href:"/wali/pembayaran"}],ga=({tagihan:_,bank_sekolah:y,list_bank:g,banks:N,wali_bank:f})=>{const[t,v]=j.useState(!1),P=new Date().toISOString().split("T")[0],{data:r,errors:s,setData:n,post:C,processing:u}=L({tanggal_pembayaran:P,jumlah_pembayaran:"",bank_sekolah_id:y.id.toString(),wali_bank_id:"",bukti_pembayaran:null,bank_baru_id:"",nama_rekening:"",nomor_rekening:"",tagihan_id:_.id.toString()}),w=e=>{const d=e.replace(/[^,\d]/g,"").toString().split(","),o=d[0].length%3;let c=d[0].substr(0,o);const x=d[0].substr(o).match(/\d{3}/gi);return x&&(c+=(o?".":"")+x.join(".")),c?`Rp. ${c}`:"Rp. "},B=e=>{const b=e.target.value.replace(/\D/g,"");n("jumlah_pembayaran",b)},S=g.map(e=>({value:e.id.toString(),label:e.nama_bank})),T=N.map(e=>({value:e.id.toString(),label:e.name})),R=f.map(e=>({value:e.id.toString(),label:e.nomor_rekening+" - A.n. "+e.nama_rekening})),l=g.find(e=>e.id.toString()===r.bank_sekolah_id),[D,F]=j.useState(new Date),I=e=>{F(e),n("tanggal_pembayaran",e?e.toISOString().split("T")[0]:"")},q=e=>{e.preventDefault(),C(route("wali.pembayaran.store"))};return a.jsxs(V,{breadcrumbs:J,children:[a.jsx(A,{title:"Pembayaran Wali Murid"}),a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:a.jsxs(W,{className:"bg-white shadow-sm p-4",children:[a.jsx("h1",{children:"ini pembayaran"}),a.jsxs("form",{onSubmit:q,className:"",children:[a.jsxs("div",{className:"grid flex-1 auto-rows-min gap-6",children:[a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx(h,{})," Informasi Rekening Pengirim"]}),a.jsxs("div",{className:"grid bg-gray-200 p-4 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"addNewBank",checked:t,onChange:()=>v(!t)}),a.jsx("label",{htmlFor:"addNewBank",className:"text-sm",children:"Tambah Bank Baru"})]}),!t&&a.jsxs("div",{className:"grid gap-3",children:[a.jsx(i,{children:"Bank Pengirim (sudah terdaftar)"}),a.jsx(p,{options:R,value:r.wali_bank_id,onValueChange:e=>n("wali_bank_id",e),placeholder:"Pilih bank yang pernah digunakan",searchPlaceholder:"Cari bank...",emptyText:"bank tidak ditemukan.",className:"w-full"})]}),t&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid gap-3",children:[a.jsx(i,{htmlFor:"nama_bank_baru",children:"Nama Bank Baru"}),a.jsx(p,{options:T,value:r.bank_baru_id,onValueChange:e=>n("bank_baru_id",e),placeholder:"Pilih bank",searchPlaceholder:"Cari bank...",emptyText:"bank tidak ditemukan.",className:"w-full"})]}),a.jsxs("div",{className:"grid gap-3",children:[a.jsx(i,{htmlFor:"nama_pemilik_rekening",children:"Nama Pemilik Rekening"}),a.jsx(m,{id:"nama_pemilik_rekening",value:r.nama_rekening,onChange:e=>n("nama_rekening",e.target.value),required:!0})]}),a.jsxs("div",{className:"grid gap-3",children:[a.jsx(i,{htmlFor:"nomor_rekening_pengirim",children:"Nomor Rekening Pengirim"}),a.jsx(m,{id:"nomor_rekening_pengirim",value:r.nomor_rekening,onChange:e=>n("nomor_rekening",e.target.value),required:!0})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx(h,{})," Informasi Rekening Tujuan"]}),a.jsxs("div",{className:"grid bg-violet-200 p-4 gap-4",children:[a.jsxs("div",{className:"grid gap-3",children:[a.jsx(i,{htmlFor:"sheet-demo-bank",children:"Bank Tujuan Pembayaran"}),a.jsx(p,{options:S,value:r.bank_sekolah_id,onValueChange:e=>n("bank_sekolah_id",e),placeholder:"Pilih bank",searchPlaceholder:"Cari bank...",emptyText:"bank tidak ditemukan.",className:"w-full"})]}),l&&a.jsx("div",{className:"bg-gray-200 p-4",children:a.jsx("table",{className:"",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{className:"md:w-40 ",children:"Bank Tujuan "}),a.jsxs("td",{className:"font-semibold",children:[" : ",l.nama_bank]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Nama Rekening "}),a.jsxs("td",{className:"font-semibold",children:[" : ",l.nama_rekening]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"No Rekening "}),a.jsxs("td",{className:"font-semibold",children:[" : ",l.nomor_rekening]})]})]})})})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx(h,{})," Informasi Pembayaran"]}),a.jsxs("div",{className:"grid bg-gray-200 p-4 gap-4",children:[a.jsxs("div",{className:"grid gap-3",children:[a.jsx(E,{label:"Tanggal Pembayaran",placeholder:"Pilih Tanggal",value:D,onChange:I,required:!0,name:"due_date"}),s.tanggal_pembayaran&&a.jsx("p",{className:"text-red-500",children:s.tanggal_pembayaran})]}),a.jsxs("div",{className:"grid gap-3",children:[a.jsxs(i,{htmlFor:"jumlah_pembayaran",children:["Jumlah Pembayaran",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx(m,{id:"jumlah_pembayaran",value:w(r.jumlah_pembayaran),onChange:B,required:!0}),s.jumlah_pembayaran&&a.jsx("p",{className:"text-red-600",children:s.jumlah_pembayaran})]}),a.jsxs("div",{className:"grid gap-3",children:[a.jsxs(i,{htmlFor:"bukti_pembayaran",children:["Bukti Pembayaran",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx(m,{id:"bukti_pembayaran",type:"file",onChange:e=>n("bukti_pembayaran",e.target.files?.[0]??null),required:!0}),s.bukti_pembayaran&&a.jsx("p",{className:"text-red-600",children:s.bukti_pembayaran})]})]})]})]}),a.jsxs(k,{type:"submit",disabled:u,children:[u&&a.jsx(H,{className:"mr-2 h-4 w-4 animate-spin"}),"Simpan"]}),a.jsx(k,{variant:"outline",children:"Close"})]})]})})]})};export{ga as default};
