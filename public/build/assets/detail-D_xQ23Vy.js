import{u as S,r as z,j as a,H as C,L}from"./app-Coh28GkN.js";import{D as B}from"./date-picker-Bo-4Pc-9.js";import{d as _,f as n,g as F,I as J,B as R}from"./button-DWWnqr2n.js";import{C as o}from"./card-BCRZtXkA.js";import{I as H}from"./input-DQfjS0Jc.js";import{L as A}from"./label-B9WtLpDX.js";import{T as x,a as h,b as l,c as e,d as b,e as i,f as j}from"./table-CLnJY92L.js";import{A as U}from"./app-layout-DxwWa6ki.js";import{U as q}from"./user-CusUDlis.js";import{P as E}from"./printer-DJb5iIxJ.js";import{L as $}from"./loader-circle-jqZAKQAR.js";/* empty css            */import"./chevron-down-BICbNeg5.js";import"./popover-CN9g6Vk6.js";import"./index-CtC4mkRX.js";import"./index-HB87p0Ve.js";import"./index-BmfNfoHw.js";import"./index-CDQHmKfo.js";import"./index-C77Ne_n3.js";import"./x-DU0VxgT_.js";import"./index-D6m8-lop.js";import"./chevrons-up-down-BAVBRCdf.js";import"./route-layout-CLvlloRf.js";const K=[{title:"Detail Data Tagihan",href:"/admin/tagihan"}],ja=({tagihan_detail:r,tagihan_details:c,pembayaran:d,totalDibayar:u,sisaBayar:N})=>{const{data:f,setData:g,post:y,reset:v,errors:m,processing:p}=S({tagihan_id:r.tagihan.id,tanggal_pembayaran:"",jumlah_dibayar:""}),[w,T]=z.useState(null),D=s=>{T(s),g("tanggal_pembayaran",s?s.toISOString().split("T")[0]:"")},k=s=>{const t=s.target.value.replace(/\D/g,"");g("jumlah_dibayar",t)},I=s=>{s.preventDefault(),y(route("admin.pembayaran.store"),{onSuccess:()=>{v()}})};return a.jsxs(U,{breadcrumbs:K,children:[a.jsx(C,{title:"Tagihan "+r.tagihan.siswa.nama}),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[a.jsx("div",{className:"mb-4 flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Detail Data Tagihan"}),a.jsx("h2",{className:"text-sm text-muted-foreground",children:"Informasi lengkap detail data tagihan"})]})}),a.jsxs(o,{className:"mb-4 bg-white p-4 shadow-sm",children:[a.jsx("div",{className:"flex items-center justify-between gap-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(q,{}),a.jsx("h1",{className:"text-xl font-bold capitalize",children:"Informasi Personal"})]})}),a.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[a.jsx("div",{children:r.tagihan.siswa.foto?a.jsx("img",{src:`/storage/${r.tagihan.siswa.foto}`,alt:r.tagihan.siswa.foto,className:"h-40 w-36 rounded-md object-cover"}):a.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(r.tagihan.siswa.foto)}&background=random`,alt:r.tagihan.siswa.foto,className:"h-40 w-36 rounded-md object-cover"})}),a.jsx("div",{children:a.jsx(x,{className:"md:w-xl",children:a.jsxs(h,{children:[a.jsxs(l,{children:[a.jsx(e,{className:"font-medium text-gray-900",children:"NISN"}),a.jsxs(e,{className:"text-gray-900",children:[": ",r.tagihan.siswa.nisn]})]}),a.jsxs(l,{children:[a.jsx(e,{className:"font-medium text-gray-900",children:"Nama"}),a.jsxs(e,{className:"text-gray-900",children:[": ",r.tagihan.siswa.nama]})]}),a.jsxs(l,{children:[a.jsx(e,{className:"font-medium text-gray-900",children:"Kelas"}),a.jsxs(e,{className:"text-gray-900",children:[": ",r.tagihan.siswa.kelas]})]}),a.jsxs(l,{children:[a.jsx(e,{className:"font-medium text-gray-900",children:"Jurusan"}),a.jsxs(e,{className:"text-gray-900 uppercase",children:[": ",r.tagihan.siswa.jurusan]})]}),a.jsxs(l,{children:[a.jsx(e,{className:"font-medium text-gray-900",children:"Angkatan"}),a.jsxs(e,{className:"text-gray-900",children:[": ",r.tagihan.siswa.angkatan]})]})]})})})]})]}),a.jsxs("div",{className:"flex w-full gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs(o,{className:"h-auto bg-white p-4 shadow-sm",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("h1",{className:"text-md font-bold capitalize",children:["Data Tagihan ",_(r.tagihan.tanggal_tagihan)]})}),a.jsx("div",{className:"overflow-x-auto overflow-y-auto rounded-xl border",children:a.jsxs(x,{className:"overflow-x-auto",children:[a.jsx(b,{children:a.jsxs(l,{className:"bg-gray-50",children:[a.jsx(i,{className:"font-semibold text-gray-700",children:"No"}),a.jsx(i,{className:"font-semibold text-gray-700",children:"Nama"}),a.jsx(i,{className:"font-semibold text-gray-700",children:"Jumlah"})]})}),a.jsx(h,{children:c.length>0?c.map((s,t)=>a.jsxs(l,{className:"hover:bg-gray-50",children:[a.jsx(e,{className:"text-gray-900",children:t+1}),a.jsx(e,{className:"font-medium text-gray-900 capitalize",children:s.nama_biaya}),a.jsx(e,{className:"text-gray-900",children:n(s.jumlah_biaya)})]},t)):a.jsx(l,{children:a.jsx(e,{colSpan:4,className:"py-4 text-center text-gray-500",children:"Belum ada Data"})})}),a.jsx(j,{children:a.jsxs(l,{className:"bg-red-100 font-semibold",children:[a.jsx(e,{className:"w-12"}),a.jsx(e,{className:" text-center font-bold text-red-500 capitalize",children:"Sisa Belum Dibayar"}),a.jsx(e,{className:" font-bold text-red-500",children:n(N)})]})}),c.length>0&&a.jsx(j,{children:a.jsxs(l,{className:"bg-gray-100 font-semibold",children:[a.jsx(e,{className:"w-12"}),a.jsx(e,{className:"text-center font-bold text-gray-900 capitalize",children:"Total Pembayaran"}),a.jsx(e,{className:"font-bold text-gray-900",children:n(c.reduce((s,t)=>s+t.jumlah_biaya,0))})]})}),a.jsx(j,{children:a.jsxs(l,{className:"bg-green-100 font-semibold",children:[a.jsx(e,{className:"w-12"}),a.jsx(e,{className:"text-center font-bold text-green-700 capitalize",children:"Total Dibayarkan"}),a.jsx(e,{className:"font-bold text-green-700",children:n(u)})]})})]})})]})}),a.jsx("div",{className:"flex-1",children:a.jsxs(o,{className:"bg-white p-4 shadow-sm",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("h1",{className:"text-md font-bold capitalize",children:"Data Pembayaran"})}),a.jsx("div",{className:"overflow-x-auto overflow-y-auto rounded-xl border",children:a.jsxs(x,{className:"overflow-x-auto",children:[a.jsx(b,{children:a.jsxs(l,{className:"bg-gray-50",children:[a.jsx(i,{className:"font-semibold text-gray-700",children:"No"}),a.jsx(i,{className:"font-semibold text-gray-700",children:"Tanggal"}),a.jsx(i,{className:"font-semibold text-gray-700",children:"Jumlah"})]})}),a.jsx(h,{children:d.length>0?a.jsxs(a.Fragment,{children:[d.map((s,t)=>a.jsxs(l,{className:"hover:bg-gray-50",children:[a.jsx(e,{className:"text-gray-900",children:a.jsx(L,{href:route("admin.pembayaran.cetakInvoice",s.id),onClick:P=>{P.preventDefault(),window.open(route("admin.pembayaran.cetakInvoice",s.id),"_blank")},children:a.jsx(E,{size:16,className:"text-blue-600"})})}),a.jsx(e,{className:"font-medium text-gray-900 capitalize",children:F(s.tanggal_pembayaran)}),a.jsx(e,{className:"text-gray-900",children:n(s.jumlah_dibayar)})]},t)),a.jsxs(l,{className:"bg-gray-100 font-bold",children:[a.jsx(e,{colSpan:2,className:"text-gray-900",children:"Total Pembayaran"}),a.jsx(e,{className:"text-gray-900",children:n(d.reduce((s,t)=>s+t.jumlah_dibayar,0))})]})]}):a.jsx(l,{children:a.jsx(e,{colSpan:3,className:"py-4 text-center text-gray-500",children:"Belum ada Pembayaran"})})})]})}),a.jsx("div",{children:a.jsx("h1",{className:"text-md font-bold capitalize",children:"Form Pembayaran"})}),a.jsxs("form",{className:"space-y-4",onSubmit:I,children:[a.jsxs("div",{className:"grid gap-3",children:[a.jsx(B,{label:"Tanggal Pembayaran",placeholder:"Pilih Tanggal",value:w,onChange:D,required:!0,name:"due_date"}),m.tanggal_pembayaran&&a.jsx("p",{className:"text-red-500",children:m.tanggal_pembayaran})]}),a.jsxs("div",{className:"grid gap-3",children:[a.jsxs(A,{htmlFor:"jumlah",children:["Jumlah",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx(H,{id:"jumlah",value:J(f.jumlah_dibayar),onChange:k,required:!0}),m.jumlah_dibayar&&a.jsx("p",{className:"text-red-600",children:m.jumlah_dibayar})]}),a.jsxs(R,{type:"submit",disabled:p,children:[p&&a.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),"Simpan"]})]})]})})]})]})]})};export{ja as default};
